# PDF 업로드 진행 상황 추적 기능 가이드

## 🎯 개요

PDF 파일 업로드 후 백엔드에서 진행되는 처리 과정을 실시간으로 확인할 수 있는 UI가 구현되었습니다. 사용자는 파일 업로드부터 AI 콘텐츠 생성, 데이터베이스 저장까지의 전체 과정을 시각적으로 모니터링할 수 있습니다.

## ✨ 주요 기능

### 1. 실시간 진행 상황 추적
- **4단계 프로세스**: 파일 업로드 → 텍스트 추출 → AI 콘텐츠 생성 → 데이터베이스 저장
- **실시간 업데이트**: 2초마다 자동으로 진행 상황 갱신
- **진행률 표시**: 각 단계별 및 전체 진행률을 퍼센트로 표시
- **상태 아이콘**: 각 단계의 상태를 직관적인 아이콘으로 표시

### 2. 스켈레톤 UI
- **로딩 상태**: 처리 중인 파일에 대한 스켈레톤 UI 제공
- **애니메이션**: 부드러운 로딩 애니메이션으로 사용자 경험 향상
- **상태 표시**: 대기, 진행중, 완료, 실패 상태를 색상으로 구분

### 3. 사용자 친화적 인터페이스
- **파일별 추적**: 여러 파일을 동시에 업로드해도 개별 추적 가능
- **자동 정리**: 완료된 작업은 5초 후 자동으로 목록에서 제거
- **수동 제어**: 자동 새로고침 ON/OFF 및 수동 새로고침 버튼 제공
- **오류 처리**: 처리 중 오류 발생 시 상세한 오류 메시지 표시

## 🚀 구현된 컴포넌트

### 1. UploadProgressContext
```typescript
// 진행 상황 관리를 위한 React Context
- 작업 추가/제거/업데이트
- 자동 새로고침 설정
- 실시간 상태 동기화
```

### 2. UploadProgressTracker
```typescript
// 메인 진행 상황 추적 UI 컴포넌트
- 활성 작업 목록 표시
- 단계별 진행 상황 시각화
- 사용자 제어 인터페이스
```

### 3. UploadProgressSkeleton
```typescript
// 로딩 상태를 위한 스켈레톤 UI
- 애니메이션 효과
- 단계별 상태 표시
- 진행률 시뮬레이션
```

## 🔧 백엔드 통합

### 1. Progress Tracker
```python
# backend/progress_tracker.py
- 작업 생성 및 상태 관리
- 단계별 진행 상황 업데이트
- 스레드 안전한 작업 추적
```

### 2. API 엔드포인트
```python
# backend/routers/batch_processing.py
GET /batch_processing/progress/{task_id}  # 특정 작업 진행 상황
GET /batch_processing/tasks              # 모든 작업 목록
```

### 3. 실시간 업데이트
```python
# 파일 처리 과정에서 실시간 상태 업데이트
- 파일 업로드 완료
- 텍스트 추출 진행
- AI 콘텐츠 생성 진행
- 데이터베이스 저장 완료
```

## 📱 사용자 경험

### 1. 업로드 플로우
1. **파일 선택**: 사용자가 PDF 파일(들) 선택
2. **업로드 시작**: "업로드" 버튼 클릭
3. **진행 상황 표시**: 자동으로 진행 상황 추적기 표시
4. **실시간 업데이트**: 각 단계별 진행 상황 실시간 확인
5. **완료 알림**: 처리 완료 시 자동으로 목록에서 제거

### 2. 시각적 피드백
- **색상 코딩**: 
  - 회색: 대기 중
  - 파란색: 진행 중
  - 초록색: 완료
  - 빨간색: 실패
- **진행률 바**: 각 단계별 및 전체 진행률 표시
- **애니메이션**: 로딩 스피너 및 부드러운 전환 효과

### 3. 오류 처리
- **상세 오류 메시지**: 처리 실패 시 구체적인 오류 내용 표시
- **재시도 옵션**: 실패한 작업에 대한 재시도 기능 (향후 구현 예정)
- **부분 실패 처리**: 여러 파일 중 일부만 실패해도 개별 상태 표시

## 🔮 향후 개선 계획

### 1. 고급 기능
- **일시정지/재개**: 처리 중인 작업 일시정지 및 재개
- **우선순위 설정**: 중요한 파일 우선 처리
- **배치 관리**: 여러 파일을 그룹으로 관리
- **히스토리**: 과거 처리 기록 보기

### 2. 성능 최적화
- **WebSocket 연결**: 더 효율적인 실시간 업데이트
- **청크 업로드**: 대용량 파일 청크 단위 업로드
- **압축**: 진행 상황 데이터 압축 전송
- **캐싱**: 클라이언트 사이드 상태 캐싱

### 3. 사용자 경험 개선
- **알림 시스템**: 브라우저 알림으로 완료 상태 알림
- **다크 모드**: 다크 테마 지원
- **모바일 최적화**: 터치 인터페이스 최적화
- **접근성**: 스크린 리더 지원 강화

## 🛠️ 개발자 가이드

### 1. 새로운 처리 단계 추가
```typescript
// 1. ProgressStep enum에 새 상태 추가
// 2. 백엔드에서 해당 단계 업데이트 호출
// 3. 프론트엔드 UI에 새 단계 아이콘 추가
```

### 2. 커스텀 진행 상황 추적
```typescript
// useUploadProgress 훅 사용
const { addTask, updateTaskProgress } = useUploadProgress();

// 새 작업 추가
const taskId = addTask(runId, filename);

// 진행 상황 업데이트
await updateTaskProgress(taskId);
```

### 3. 스타일 커스터마이징
```css
/* 진행률 바 색상 변경 */
.progress-bar {
  --progress-background: #your-color;
}

/* 상태별 색상 커스터마이징 */
.status-pending { color: #gray; }
.status-active { color: #blue; }
.status-completed { color: #green; }
.status-failed { color: #red; }
```

---

이 기능을 통해 사용자는 PDF 업로드 후 백엔드에서 진행되는 모든 과정을 실시간으로 확인할 수 있으며, 처리 상태에 대한 명확한 피드백을 받을 수 있습니다. 🎉